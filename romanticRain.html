<!DOCTYPE html>
<html>

<head>
	<title>漫天雨</title>
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
		}

		.container {
			position: fixed;
			width: 100%;
			height: 100%;
			background: linear-gradient(to bottom, #202020, #111119);

		}

		.rain {
			background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.25));
			position: absolute;
			top: 0;
			right: 0;
			width: 1px;
			height: 50px;
		}
	</style>
</head>

<body>
	<div class="container"></div>
</body>
<script type="text/javascript">
	class Rain {
		constructor() {
			this.container = document.querySelector(".container")
			this.add()
			this.drop()
			setInterval(this.drop.bind(this), 20)
		}
		// 添加10个雨点
		add() {
			for (let i = 0; i < 10; i++) {
				let rain = document.createElement("div")
				let random = Math.random() * 100
				let left = random + "%"
				let top = +random + 'px'
				rain.classList.add("rain")
				rain.style.left = left
				rain.style.top = top
				this.container.appendChild(rain)
			}
		}
		// 处理雨点下落相关事宜
		drop() {
			let rain = document.querySelectorAll(".rain")
			if (rain.length < 30) {
				this.add()
			}
			rain.forEach((item) => {
				item.style.top = item.style.top.replace(/px/, "") - 1 + Math.random() * 80 + "px"
				if (item.style.top.replace(/px/, "") > 700) {
					this.container.removeChild(item)
				}
			})
		}
	}
	new Rain()

</script>

</html>